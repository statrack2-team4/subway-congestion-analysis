# 🚇주제 : 지하철 혼잡도 원인 분석 및 해결방안 제시

# ◽개요

- **진행 기간**: Week 2 ~ Week 3 (9일)
    - 일자별 진행상황
        
        
        | 26.01.05 월 | 프로젝트 주제 탐색 |
        | --- | --- |
        | 26.01.06 화 |  |
        | 26.01.07 수 | 프로젝트 주제 확정 |
        | 26.01.08 목 | 데이터 수집 |
        | 26.01.09 금 | 데이터 수집 공유, 데이터 설계 |
        | 26.01.10 토 | API수집 코드 작성, 크롤링 구현 |
        | 26.01.11 일 | DB설계 및 적재 |
        | 26.01.12 월 | EDA + 기본 시각화 |
        | 26.01.13 화 | 텍스트 분석 |
        | 26.01.14 수 | Plotly 대시보드 |
        | 26.01.15 목 | 해결 방안 정리, 리포트 |
        
- **사용 언어**: Python
- **DBMS**: SQLite

# ◽로드맵

### **1차 발표: 가설 제시 + 탐색적 데이터 분석**

- 5-7개 핵심 가설 선정 및 논리 전개
- 각 변수(날씨, 시위, 행사, 열차정보)의 기초 통계
- 상관관계 분석 (히트맵, 산점도)
- 시각화: 시간대별/요일별/역별 혼잡도 패턴

### **2차 발표: 가설 검증 + 패턴 발견**

- 회귀분석/머신러닝 모델로 가설 검증
- Best Practice vs Worst Practice 역 비교
- "혼잡도 예측 모델" 개발
- 변수 중요도 분석 (어떤 요인이 가장 영향 큰가?)
- 특이 케이스 발견 (예: 시위+비 조합 효과)

### **3차 발표: 해결방안 제시**

# ◽연구 배경

- 출퇴근 시간대 지하철 혼잡은 **승객 불편**, **안전 문제**, **운영 비효율**을 초래함
- 혼잡도는 시간·노선·역별로 상이하며, **정량적 분석**이 필요함
- 공공데이터를 활용해 혼잡 패턴을 분석하고 **개선 시사점**을 도출하고자 함

# ◽**필수 구현 요소**

1. **데이터 수집**: 최소 2개 이상 소스 (API + 크롤링)
2. **데이터베이스**: SQLite or PostgreSQL, 정규화된 스키마 설계
3. **텍스트 분석**: 감정분석 OR 토픽모델링 OR 키워드 추출
4. **시각화**: Plotly 인터랙티브 대시보드 5개 이상
5. **최종 리포트**: Jupyter Notebook + Readme.md

# 📂 프로젝트 구조

```python
subway-congestion-analysis/
┣ data/
┣ api/
┣ crawler/
┣ db/
┣ analysis/
┣ dashboard/
┣ report.ipynb
┗ README.md
```

## 👥 팀원

- 팀원A :
- 팀원B : 데이터 수집 / 분석 / 시각화 / 발표 분담 수행
- 팀원C :
- 팀원D :

# 🗒️**결과물**

- GitHub Repository (코드 + 문서화)
    - GitHub 구조 예시
        
        ```
        📦 subway-congestion-analysis
         ┣ 📂data
         ┣ 📂 crawler
         ┣ 📂 api
         ┣ 📂 db
         ┣ 📂 analysis
         ┣ 📂 dashboard
         ┣ 📜 README.md
         ┣ 📜 report.ipynb
        ```
        

[발표 스토리라인 (10분 + Q&A 대비)](https://www.notion.so/10-Q-A-2e25e2457cf580378dc5f68d0ebec639?pvs=21)

---

# 📌 가설

### 가설1

### 📌 가설 2: "시위 유형별 차별적 영향"

**핵심 아이디어**: 교수님 피드백처럼 "정돈된 시위 vs 혼란스러운 시위"

**분석 포인트**:

- 시위 참가 인원 규모별 혼잡도 증가 패턴
- 시위 주최 단체 성격 (조직화된 집회 vs 자발적 집회)
- 시위 진행 시간대 (낮 시위 vs 저녁 시위 영향 차이)
- 시위 위치와 역까지의 거리 (200m 이내 vs 500m 이내)
- 경찰 통제선 설치 여부와 동선 차단 효과

**세부 가설**:

- 정돈된 대규모 시위: 특정 시간대 집중 혼잡 (시작/종료 시점)
- 비정돈 시위: 시간대 분산 + 주변 역까지 영향 확산

### 📌 **가설 3: "행사 유형별 승하차 패턴"**

**핵심 아이디어**: 콘서트 vs 전시회 vs 스포츠 경기 = 완전히 다른 패턴

**분석 포인트**:

- **콘서트/공연**: 시작 1시간 전 집중 승차 → 종료 후 30분 폭발적 하차
- **전시회/박람회**: 오전~오후 분산 입장, 저녁 시간 하차 집중
- **스포츠 경기**: 경기 시작 2시간 전~직전까지 지속적 승차
- **페스티벌**: 종일 분산되지만 저녁 시간대 피크
- 행사 규모 (만 명 기준) vs 혼잡도 증가율 그래프

**특이점 분석**:

- 행사장 최인접역 vs 1개 역 전에서 하차하는 패턴 (미리 내려서 걷기)

### 📌 가설 4: "날씨 임계점 가설"

**핵심 아이디어**: 날씨가 나쁠수록 지하철 이용 증가, 하지만 "너무 나쁘면" 오히려 통행량 감소

**분석 포인트**:

- **강수량 구간별 분석**:
    - 0~5mm: 약간 증가 (우산 쓰고 다님)
    - 5~20mm: 급격히 증가 (버스→지하철 전환)
    - 20mm 이상: 오히려 감소 (재택근무, 외출 취소)
- **온도별 패턴**:
    - 폭염(30도 이상): 에어컨 있는 지하철 선호
    - 한파(-5도 이하): 실내 대중교통 선호
    - 쾌적한 날씨(15-25도): 도보/자전거 증가로 지하철 감소
- **미세먼지 vs 혼잡도**: 나쁨 이상일 때 마스크 착용 + 지하철 선택

### 📌 가설 5: "열차 운행 정보 신뢰도 가설"

**핵심 아이디어**: 배차 간격 불규칙 → 승객 대기 집중 → 특정 열차에 혼잡 집중

**분석 포인트**:

- 정상 배차 간격(예: 4분) vs 실제 배차 간격의 표준편차
- 배차 지연 발생 시 다음 열차 혼잡도 급증 패턴
- 출퇴근 시간 vs 평시 배차 간격 변화
- 급행/완행 열차 혼재 노선의 승객 집중 현상
- "2분 후 도착" 정보의 정확도와 승객 대기 분산 효과

**세부 분석**:

- 배차 간격 5분 이상 벌어졌을 때 = 혼잡도 1.5배 증가
- 실시간 정보 정확도 높은 역 = 승객 분산 효과

### 📌 가설 6: "요일별 패턴 + 휴일 효과"

**핵심 아이디어**: 월요일 출근 vs 금요일 퇴근, 연휴 전날, 공휴일 다음날

**분석 포인트**:

- **월요일 증후군**: 지각 방지로 출근 시간 집중도 더 높음
- **금요일 효과**: 퇴근 시간 약간 빨라짐 + 회식/약속으로 특정 역 혼잡
- **공휴일 전날**: 여행 가방 들고 지하철 = 공간 차지 ↑
- **대체공휴일/징검다리 연휴**: 평일인데 비정상적 패턴
- **월초 vs 월말**: 급여일 이후 소비 패턴 변화

### 📌 가설 7: "역 구조 및 동선 효율성"

**핵심 아이디어**: 같은 승차 인원이라도 역 구조에 따라 체감 혼잡도 다름

**분석 포인트**:

- 승강장 폭/길이와 혼잡도 관계
- 출구 수와 승객 분산 효과
- 환승역 vs 일반역 (환승객이 플랫폼 점유)
- 에스컬레이터/엘리베이터 개수와 병목 현상
- 스크린도어 위치와 승객 집중 구간

**특이 케이스**:

- 좁은 승강장 + 많은 승차 인원 = 실제 혼잡도보다 체감 혼잡도 훨씬 높음

### 📌 가설 8: "시간대 세분화 가설"

**핵심 아이디어**: 출근시간을 30분 단위로 쪼개면 완전히 다른 패턴

**분석 포인트**:

- 7:30~8:00: 이른 출근 (여유 통근)
- 8:00~8:30: 1차 피크 (정시 출근족)
- 8:30~9:00: 2차 피크 (지각 위기 + 서두르는 사람)
- 9:00~9:30: 감소세 but 여전히 높음 (플렉스 출근)
- 점심시간 (12:00~13:00): 미팅/외근으로 특정 역 집중
- 퇴근 (18:00~19:30): 2시간 동안 지속적 피크

### 📌 가설 9: "지역 특성 클러스터링"

**핵심 아이디어**: 업무지구 vs 주거지역 vs 상업지구 = 완전히 다른 혼잡 패턴

**분석 포인트**:

- **업무지구 (강남, 여의도, 광화문)**:
    - 평일 출퇴근 극심, 주말 한산
    - 점심시간 약간 분산, 저녁 회식 시간대 집중
- **주거지역 (노원, 강서, 송파)**:
    - 아침 승차 집중, 저녁 하차 집중
    - 주말 오후 쇼핑/외출로 적당한 혼잡
- **상업지구 (명동, 홍대, 강남역)**:
    - 평일 저녁 + 주말 종일 혼잡
    - 유동인구 많지만 방향 분산
- **대학가 (신촌, 서울대입구)**:
    - 학기 중 vs 방학 혼잡도 차이 극명
    - 오전 9시, 오후 3-6시 집중

### 📌 가설 10: "연쇄 반응 가설"

**핵심 아이디어**: A역 혼잡 → B역으로 사람들 분산 시도 → B역도 혼잡

**분석 포인트**:

- 사고/지연 발생 역의 전후 역 혼잡도 변화
- "한 정거장 전에 내려서 걷기" 패턴
- 실시간 혼잡도 정보 제공 시 인접역 혼잡도 증가
- SNS/뉴스에서 "○○역 혼잡" 보도 → 다른 역 선택

# 🔗 혼잡도 영향 지표

| 구분 | 요인 |
| --- | --- |
| 구조적 | 출퇴근, 업무지구, 칸 수 |
| 환경적 | 날씨 |
| 이벤트 | 시위, 행사 |
| 운영적 | 고장, 지연 |

## 분석 대상 및 범위

1. 시간적 범위 : 2023년 1월~2025년 12월
2. 공간적 범위 : 수도권 지하철 (1-9호선)

## 분석 관점

1. 시간
    - 출퇴근 시간
        - 출근07-09시 / 퇴근18-20시
    - 요일별 차이
        - 평일vs주말
    - 계절별 차이
        - 학기중vs방학
        - 봄,가을vs여름,겨울(폭염,한파 영향)
2. 공간
    - 노선별 혼잡도
        - 2호선vs9호선vs신분당선
    - 역별 혼잡
        - 환승역vs일반역
        - 업무지구/주거지역/대학가
3. 이벤트, 외부 요인
    - 비 오는 날 vs 맑은날
    - 대형 행사 (콘서트, 스포츠 경기)
    - 사고, 지연 발생

# 🎯 분석 목표

- 지하철 혼잡도에 영향을 미치는 요인 분석
- 외부 요인(날씨, 행사, 집회, 고장 등)의 영향 정량화
- 시각화 기반 인사이트 도출
- 데이터 기반 정책·운영 개선 방안 제안

# 🧠 분석 내용

- 날씨가 지하철 이용량에 미치는 영향
- 출퇴근 시간대 혼잡도 분석
- 주요 업무지구 통과 여부 비교
- 행사·집회 발생 시 혼잡도 영향
- 시간대·노선별 혼잡도 예측 모델
- 환승역이 혼잡도에 미치는 영향 분석

## ❓ 분석 질문

Q1. 출퇴근 시간대 혼잡도는 다른 시간대와 얼마나 차이가 나는가?

Q2. 혼잡도가 가장 높은 노선과 역은 어디인가?

Q3. 환승역은 일반역보다 혼잡도가 높은가?

Q4. 평일과 주말의 혼잡 패턴은 어떻게 다른가?

Q5. 특정 시간·노선 조건에서 혼잡 발생을 예측할 수 있는가?

## 🗒️ 데이터 분석 우선순위 제안

**높은 임팩트 + 분석 용이**:

1. 날씨(강수량) × 출퇴근 시간 → 혼잡도 급증 패턴
2. 대형 행사(만 명 이상) × 역별 거리 → 영향 범위
3. 시간대 세분화 (30분 단위) → 정확한 피크 타임

**중간 임팩트 + 분석 필요**:

4. 시위 규모/유형 × 동선 차단 → 혼잡 패턴

5. 열차 배차 간격 불규칙성 → 특정 열차 집중

6. 요일별 + 휴일 효과 → 비정상 패턴

**장기 과제**:

7. 역 구조 데이터 수집 → 공간 효율성 분석

8. 지역 특성 클러스터링 → 맞춤형 대책

---

# 🗄데이터 정의

주요 데이터

- 지하철 승,하차 인원
- 열차 정원 또는 혼잡도

파생 변수

- 시간대(출근/퇴근/비혼잡)
- 요일(평일/주말)
- 혼잡도 지수 `혼잡도 = (탑승 인원 / 수송 정원) × 100`

# 🗄데이터 수집 설계

### 1. CSV

- 공공 데이터포털 : 서울시 지하철 호선별 역별 시간대별 승하차인원정보
- 기상청 :

### 2. 크롤링

- 서울경찰청 집회·시위 정보
- 서울시 행사 일정
- 서울교통공사 장애 공지사항

| 지하철 혼잡도 & 이용 데이터(API) | 날씨 데이터(API) | 집회,시위,행사(크롤링) | 지하철 장애,고장
(크롤링orCSV) |
| --- | --- | --- | --- |
| **서울 열린데이터 광장
-** 실시간 지하철 혼잡도 API
- 역별 승하차 인원 데이터
- 열차 편성 정보 (칸 수) | 기상청 Open API | 서울경찰청 집회 정보 페이지
서울시 문화행사 일정 페이지
네이버/카카오 행사 일정 페이지 | 서울교통공사 공지사항
지하철 장애 발생 기록 |
| 날짜, 시간대 | 기온 | 날짜 | 고장 발생 여부 |
| 노선명, 역명 | 강수여부(비/눈) | 위치 | 고장 시간대 |
| 혼잡도 지수or승객수 | 강수량 | 예상 인원 | 노선 |
| 열차 칸 수 | 체감온도 | 행사 유형(집회,공연,축제) |  |

---

# 🗄데이터베이스 설계 (SQLite or PostgreSQL)

### ERD핵심 테이블 설계(정규화)

### 📁 `subway_station`

| 컬럼 | 설명 |
| --- | --- |
| station_id (PK) | 역 ID |
| station_name | 역명 |
| line | 노선 |
| is_business_area | 주요 업무지구 여부 (중구/강남/여의도) |

### 📁 `subway_congestion`

| 컬럼 | 설명 |
| --- | --- |
| congestion_id (PK) |  |
| station_id (FK) |  |
| datetime |  |
| congestion_level |  |
| passenger_count |  |
| car_count |  |

### 📁 `weather`

| 컬럼 | 설명 |
| --- | --- |
| weather_id (PK) |  |
| datetime |  |
| temperature |  |
| rainfall |  |
| weather_type |  |

### 📁 `events`

| 컬럼 | 설명 |
| --- | --- |
| event_id (PK) |  |
| date |  |
| location |  |
| event_type |  |
| expected_people |  |

### 📁 `subway_incident`

| 컬럼 | 설명 |
| --- | --- |
| incident_id (PK) |  |
| line |  |
| datetime |  |
| incident_type |  |

**분석 시 JOIN 기준**

- `datetime`
    - `line`
    - `station_id`

---

# 📈 시각화

### ① 시간대별 혼잡도 변화

- x축: 시간
- y축: 평균 혼잡도
- 출퇴근 시간 강조

### ② 날씨 vs 혼잡도

- 강수 여부에 따른 혼잡도 Box Plot
- 비/눈/맑음 비교

### ③ 주요 업무지구 vs 비업무지구 혼잡도

- 중구/강남/여의도 통과 여부에 따른 차이

### ④ 집회·행사 유무에 따른 혼잡도

- 행사 있는 날 vs 없는 날
- 위치 기반 Heatmap

### (보너스) 혼잡 원인 키워드 워드클라우드

---

# 📊 대시보드 (Plotly)

## 🖥 전체 레이아웃 구성

```python

```

## 📌 대시보드 구성 요소

**🔹 상단**

- 전체 혼잡도 요약 지표 (평균, 최대)

**🔹 좌측 필터**

- 날짜 범위
- 노선 선택
- 날씨 조건
- 행사 유무

**🔹 메인 그래프**

- 1. 시간대별 혼잡도 (Line)
    
    ```python
    import plotly.expressas px
    
    fig = px.line(
        df,
        x="hour",
        y="congestion_level",
        title="시간대별 평균 혼잡도"
    )
    fig.show()
    ```
    
- 2. 날씨별 혼잡도 (Box)
    
    ```python
    fig = px.box(
        df,
        x="weather_type",
        y="congestion_level",
        title="날씨에 따른 혼잡도 분포"
    )
    fig.show()
    ```
    
- 3. 업무지구 여부 (Bar)
    
    ```python
    fig = px.bar(
        df,
        x="is_business_area",
        y="congestion_level",
        title="업무지구 통과 여부에 따른 혼잡도",
        barmode="group"
    )
    fig.show()
    ```
    
- 4. 행사 유무 비교  (Box)
    
    ```python
    fig = px.box(
        df,
        x="event_exists",
        y="congestion_level",
        title="행사 유무에 따른 혼잡도"
    )
    fig.show()
    ```
    

**🔹 하단**

1. 장애 전·후 혼잡도 변화 (Line)
2. 혼잡 원인 키워드 (Bar or WordCloud)

### 🎯 데모 시 설명 포인트

- 필터 변경 → 그래프 즉시 반응
- 특정 조건(비 + 행사)에서 혼잡 급증 강조
- 정책 시뮬레이션처럼 활용 가능함을 어필

---

# 💡 해결 방안

- **단기 대책**:
    - 실시간 혼잡도 정보 제공 강화
    - 행사 있는 날 임시 배차 증편
    - 승객 분산 유도 (인접역 이용 권장)
- **중기 대책**:
    - **열차 운행 간격 최적화 알고리즘**
    - **날씨 예보 기반 사전 배차 계획 ⭐**
        - 강수 예보 시 출근 시간대 열차 증편
    - **시위/행사 일정 사전 대응 운행 ⭐**
        - 행사 일정 기반 사전 혼잡 경고
    - **업무지구 통과 노선 집중 관리 ⭐**
        - 강남/여의도 구간 혼잡 시간 분산 유도
- **장기 대책**:
    - 버스 노선 재설계
    - 역 구조 개선 (넓은 승강장, 출구 추가)
    - 플렉스 출근 확대 정책 제안

---

---

## 1️⃣ 날씨 🌧️

[ 날씨 영향 분석 ](https://www.notion.so/2e65e2457cf580979269c8eba6283267?pvs=21)

### 왜 중요한가?

- 비·눈 → 보행/자전거 감소 → 대중교통 수요 증가
- 폭염·한파 → 이동 시간 증가, 체감 혼잡 증가

### 수집 데이터

- 기상청 초단기실황 CSV

### 혼잡 영향 지표

: 기온(시간별, 월별 최저,최고), 강수량, 강수 형태

### EDA 질문

- 비 오는 날 혼잡도가 평균보다 높은가?
- 특정 노선은 날씨 영향이 더 큰가?

---

## 2️⃣ 집회·시위·파업 🚩

### 왜 중요한가?

- 무정차 통과, 출입구 통제 등 **직접적 영향**
- 종로·광화문·시청 등 특정 지역 집중

### 수집 데이터

- 서울교통공사 지하철 알림정보
- 또타지하철앱 공지사항
- (보조) 뉴스 크롤링

### 혼잡 영향 지표 예

| 지표 | 설명 |
| --- | --- |
| Protest_flag | 시위 발생 여부 |
| Protest_duration | 시위 지속 시간 |
| Protest_area_score | 영향 지역 점수 |

### EDA 질문

- 시위 발생 시 혼잡도는 얼마나 증가하는가?
- 어떤 노선/역이 가장 민감한가?

---

## 3️⃣ 행사 🎤

### 왜 중요한가?

- 콘서트, 축제, 스포츠 경기 → **일시적 대규모 이동**
- 종료 시간에 집중 폭증

### 수집 데이터

- 서울시 행사 정보
- 공공 포털 행사 일정
- 뉴스/공지 텍스트

### 혼잡 영향 지표 예

| 지표 | 설명 |
| --- | --- |
| Event_flag | 행사 유무 |
| Event_scale | 행사 규모 (소/중/대) |
| Event_end_time | 종료 시간대 |

### EDA 질문

- 행사 종료 전후 혼잡 차이는?
- 특정 역은 행사 영향이 반복되는가?

---

## 4️⃣ 출퇴근 시간 ⏰

### 왜 중요한가?

- 혼잡도의 **가장 강력한 구조적 요인**

### 수집 데이터

- 시간대별 승하차 인원
- 시간 정보 자체

### 혼잡 영향 지표 예

| 지표 | 설명 |
| --- | --- |
| Peak_flag | 출퇴근 시간 여부 |
| Peak_level | 피크 강도 |

### EDA 질문

- 출근 vs 퇴근 중 어느 쪽이 더 혼잡한가?
- 출퇴근 + 다른 요인이 겹치면 어떻게 되는가?

---

## 5️⃣ 지하철의 칸 수 🚇

### 왜 중요한가?

- 동일 승객 수라도 칸 수가 적으면 혼잡도 ↑
- 노선별·차량 유형별 차이

### 수집 데이터

- 노선별 차량 정보 (공공자료)
- 고정 값 (노선 특성)

### 혼잡 영향 지표 예

| 지표 | 설명 |
| --- | --- |
| Car_count | 열차 칸 수 |
| Capacity_score | 수송 능력 지표 |

### EDA 질문

- 같은 승하차 인원 대비 칸 수가 적은 노선이 더 혼잡한가?

---

## 6️⃣ 지하철 고장·사고 ⚠️

### 왜 중요한가?

- 지연 → 체류 시간 증가 → 혼잡 폭발

### 수집 데이터

- 지하철 알림정보
- 노선별 지연시간 정보

### 혼잡 영향 지표 예

| 지표 | 설명 |
| --- | --- |
| Incident_flag | 사고/고장 여부 |
| Delay_minutes | 지연 시간 |

### EDA 질문

- 고장 발생 시 혼잡도 상승 폭은?
- 사고가 잦은 노선의 구조적 문제는?

---

## 7️⃣ 주요 업무지구 통과 여부 🏢

### 왜 중요한가?

- 중구·강남·여의도는 **상시 높은 유입**
- 평일/주말 차이 뚜렷

### 수집 데이터

- 노선-지역 매핑
- 행정동별 승차 데이터

### 혼잡 영향 지표 예

| 지표 | 설명 |
| --- | --- |
| CBD_pass | 주요업무지구 통과 여부 |
| CBD_weight | 업무지구 영향 가중치 |

### EDA 질문

- 업무지구 통과 노선은 항상 더 혼잡한가?
- 업무지구 영향은 출퇴근 시간에만 유효한가?

---

## 8️⃣ 혼잡도 영향 지표 통합 구조 (중요)

### 지표 분류

| 구분 | 요인 |
| --- | --- |
| 구조적 | 출퇴근, 업무지구, 칸 수 |
| 환경적 | 날씨 |
| 이벤트 | 시위, 행사 |
| 운영적 | 고장, 지연 |

---

### 통합 혼잡 영향 지수 (개념)

> 혼잡 영향 지수 =구조적 요인 + 환경 요인 + 이벤트 요인 + 운영 리스크
> 

이 지수로:

- “왜 오늘이 유독 혼잡했는지” 설명
- 해결 방안별 우선순위 제시 가능

---

## 9️⃣ EDA에서 꼭 보여주면 좋은 그림

1. 날씨별 평균 혼잡도 비교
2. 시위 발생 전/후 혼잡도 변화
3. 출퇴근 + 시위 겹침 효과
4. 업무지구 통과 여부별 혼잡도
5. 고장 발생일 혼잡 분포

---