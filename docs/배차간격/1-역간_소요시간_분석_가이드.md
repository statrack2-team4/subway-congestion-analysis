# 지하철 1호선 역간 소요시간 분석 가이드

## 📊 분석 개요

이 노트북은 **인접한 역 사이의 이동 소요시간**을 계산하고, 소요시간이 긴 구간부터 정렬하여 분석합니다.

## 🎯 핵심 기능

### 1. 역간 소요시간 계산
- 각 열차의 연속된 정차역 사이의 이동 시간 계산
- **현재 역 출발시간 - 다음 역 도착시간 = 소요시간**
- 모든 열차의 실제 운행 데이터 기반

### 2. 역 구간 정규화
- "서울역 → 남영" 과 "남영 → 서울역"을 **동일한 구간**으로 처리
- 양방향 평균 소요시간이 동일함을 확인
- 알파벳 순으로 정렬하여 통일된 형식으로 표현

### 3. 소요시간 통계 분석
- **평균 소요시간**: 각 구간의 평균 이동 시간
- **표준편차**: 운행 시간의 변동성 (불안정성 지표)
- **최소/최대값**: 소요시간 범위
- **측정 횟수**: 데이터 신뢰도

## 📈 주요 분석 결과

### 소요시간이 긴 구간 Top 30
- 역간 거리가 먼 구간
- 표정속도가 낮은 구간
- 주로 교외 구간에서 발견
- **CSV 파일로 저장**: `역간_소요시간_전체.csv`

### 소요시간이 짧은 구간 Top 20
- 역간 거리가 가까운 구간
- 도심 구간에 많음
- 정차 시간이 짧은 구간

### 변동성이 큰 구간
- 표준편차가 큰 구간 = 운행 시간이 불안정
- 혼잡도, 신호 대기, 배차 간격 등의 영향
- 승객 경험에 부정적 영향

### 주중/주말 비교
- 같은 구간도 주중/주말 소요시간 차이 존재
- 혼잡도 차이가 운행 시간에 영향
- **CSV 파일로 저장**: `역간_소요시간_주중주말비교.csv`

## 🔍 분석 흐름

```
1. 데이터 로드
   └─> 일반열차만 필터링 (급행 제외)

2. 역간 소요시간 계산
   └─> 연속된 두 역 사이의 시간 차이
   └─> 이상치 제거 (0~60분 범위)

3. 역 구간 정규화
   └─> 양방향을 하나의 구간으로 통합
   └─> 예: "서울역 ↔ 남영"

4. 통계 계산
   └─> 평균, 표준편차, 최소/최대
   └─> 주중/주말별 비교

5. 정렬 및 시각화
   └─> 소요시간 긴 순서대로
   └─> 다양한 차트로 시각화

6. CSV 저장
   └─> 전체 결과 저장
   └─> 주중/주말 비교 저장
```

## 📁 출력 파일

| 파일명 | 내용 |
|--------|------|
| `역간_소요시간_전체.csv` | 모든 구간의 평균 소요시간 (긴 순서대로 정렬) |
| `역간_소요시간_주중주말비교.csv` | 주중/주말 소요시간 비교 |

## 📊 시각화 차트

1. **막대 그래프**: 소요시간 Top 30 (긴 구간)
2. **막대 그래프**: 소요시간 Top 20 (짧은 구간)
3. **히스토그램**: 전체 소요시간 분포
4. **박스 플롯**: 특정 구간의 소요시간 분포 (주중/주말, 방향별)
5. **산점도**: 평균 소요시간 vs 변동성
6. **히트맵 스타일**: Top 50 구간 (역 순서 고려)

## 💡 활용 방안

### 1. 혼잡도 분석과 연계
```python
혼잡도 지표 = 소요시간 × 배차 간격 × 승하차 인원
```

- **소요시간이 길고 + 배차 간격이 길면** → 대기 승객 누적 → 혼잡도 증가
- **변동성이 크면** → 운행 불확실성 → 승객 불편 증가

### 2. 병목 구간 식별
- 소요시간이 유난히 긴 구간 = 병목 구간
- 선로 개량, 신호 시스템 개선 필요 구간

### 3. 차량 배치 최적화
- 소요시간 긴 구간 → 여유 있는 스케줄 필요
- 변동성 큰 구간 → 버퍼 시간 추가 필요

### 4. 시간대별 분석 확장
- 출퇴근 시간대 vs 평시
- 소요시간 변화 패턴 파악

## 📌 주의사항

1. **데이터 필터링**: 
   - 급행 열차는 제외 (정차역이 다름)
   - 이상치 제거 (0~60분 범위만 사용)

2. **양방향 통합**:
   - 상행/하행 평균 소요시간이 거의 동일
   - 정규화를 통해 분석 효율성 증가

3. **측정 횟수 고려**:
   - 측정 횟수가 적은 구간은 신뢰도 낮음
   - 통계 분석 시 최소 10회 이상 측정된 구간만 사용 권장

4. **시간대별 차이**:
   - 평균값만으로는 출퇴근 시간대 특성 파악 어려움
   - 시간대별 세분화 분석 필요
